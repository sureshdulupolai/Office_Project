<style>
  .bi-box-arrow-in-right{
    margin-left: -4px;
  }
</style>
<nav class="navbar navbar-dark bg-dark fixed-top">
  <div class="container-fluid">
    <a class="navbar-brand" href="{% url 'home' %}"><i class="bi bi-building"></i> Office Portal</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDarkNavbar" aria-controls="offcanvasDarkNavbar" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="offcanvas offcanvas-end text-bg-dark" tabindex="-1" id="offcanvasDarkNavbar" aria-labelledby="offcanvasDarkNavbarLabel">
      <div class="offcanvas-header">
        <h5 class="offcanvas-title" id="offcanvasDarkNavbarLabel"><i class="bi bi-building"></i> Office Portal</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close"></button>
      </div>
      <div class="offcanvas-body">
        <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
          {% if user.is_authenticated %}
            <li class="nav-item">
              <a class="nav-link {% if request.path == '/' %}active{% endif %}" href="{% url 'home' %}"><i class="bi bi-house-door me-2"></i> Dashboard</a>
            </li>
            <li class="nav-item">
              <a class="nav-link {% if request.path == '/mail/' %}active{% endif %}" href="{% url 'mail' %}"><i class="bi bi-inbox me-2"></i> Inbox</a>
            </li>
            <li class="nav-item">
              <a class="nav-link {% if request.path == '/mail-send/' %}active{% endif %}" href="{% url 'send' %}"><i class="bi bi-envelope-plus me-2"></i> Compose Mail</a>
            </li>
            <li class="nav-item">
              <a class="nav-link {% if request.path == '/send-mail-to/' %}active{% endif %}" href="{% url 'sendUs' %}"><i class="bi bi-send-check me-2"></i> Sent Mails</a>
            </li>
            <li class="nav-item">
              <a class="nav-link {% if request.path == '/save-mail/' %}active{% endif %}" href="{% url 'SaveMail' %}"><i class="bi bi-save me-2"></i> Saved Mails</a>
            </li>
            <li class="nav-item">
              <a class="nav-link {% if request.path == '/user-table/' %}active{% endif %}" href="{% url 'table' %}"><i class="bi bi-table me-2"></i> Data Table</a>
            </li>
            <li class="nav-item">
              <a class="nav-link {% if request.path == '/chats/' %}active{% endif %}" href="{% url 'Chats' %}"><i class="bi bi-chat-left-text me-2"></i> Chats</a>
            </li>
            
            {% if Category == 'Owner' or Category == 'Manager' %}
            <li class="nav-item">
              <a class="nav-link" href="{% url 'CreateGroup' %}"><i class="bi bi-people me-2"></i> Create Group</a>
            </li>
          {% endif %}

          {% else %}
            <li class="nav-item">
              <a class="nav-link {% if request.path == '/user-signup/' %}active{% endif %}" href="{% url 'signup' %}"><i class="bi bi-person-plus me-2"></i> Sign Up</a>
            </li>
            <li class="nav-item">
              <a class="nav-link {% if request.path == '/user-login/' %}active{% endif %}" href="{% url 'login' %}"><i class="bi bi-box-arrow-in-right me-2"></i> Login</a>
            </li>
          {% endif %}
        </ul>
        {% if user.is_authenticated %}
          <div style="position: absolute; bottom: 0px; width: 92%;">
            <div style="width: 100%; height: 2px; background-color: gray;"></div>
            <ul class="navbar-nav justify-content-end flex-grow-1">
              <li class="nav-item">
                <a class="nav-link {% if '/profile/' in request.path %}active{% endif %}" href="{% url 'profile' user.id user.username 0 %}"><i class="bi bi-person-circle me-2"></i> Profile</a>
              </li>
              <li class="nav-item" style="position: relative; top: -8px;">
                <a class="nav-link {% if '/log-out/' in request.path %}active{% endif %}" href="{% url 'logout' %}"><i class="bi bi-box-arrow-right me-2"></i> Logout</a>
              </li>
            </ul>
          </div>
        {% endif %}
      </div>
    </div>
  </div>
</nav>